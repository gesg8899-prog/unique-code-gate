<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Player Gate</title>
</head>
<body>
<h2>Enter Your Access Code</h2>
<input type="text" id="codeInput" placeholder="Enter code">
<button onclick="checkCode()">Enter</button>
<p id="msg"></p>

<script>
// JSON dengan daftar kode yang valid
const codesUrl = 'https://gesg8899-prog.github.io/unique-code-gate/player_codes.json';
// Link target setelah kode valid
const redirectURL = 'https://gesg8899-prog.github.io/plinkoGE88/';

async function checkCode() {
    const code = document.getElementById('codeInput').value.trim().toUpperCase();
    const msg = document.getElementById('msg');
    msg.textContent = '';

    if (!code) {
        msg.textContent = 'Please enter a code';
        msg.style.color = 'red';
        return;
    }

    try {
        const res = await fetch(codesUrl + '?ts=' + Date.now());
        if (!res.ok) throw new Error('Cannot fetch codes');

        const codes = await res.json();
        const found = codes.find(c => c.code === code);

        if (!found) {
            msg.textContent = 'Invalid code';
            msg.style.color = 'red';
            return;
        }

        // ✅ Kode valid → langsung redirect
        msg.textContent = 'Access Granted. Redirecting...';
        msg.style.color = 'green';
        window.location.href = redirectURL;

    } catch (e) {
        console.error(e);
        msg.textContent = 'Connection error';
        msg.style.color = 'red';
    }
}
</script>
</body>
</html>
