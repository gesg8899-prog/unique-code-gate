<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Player Gate</title>
<style>
body{font-family:sans-serif;background:#000;color:#ffd700;text-align:center;padding:60px;}
.gate{max-width:450px;margin:auto;padding:30px;border-radius:20px;background:linear-gradient(145deg,#1a1a1a,#000);border:2px solid #ffd700;box-shadow:0 0 25px #ffcc00;}
.error{color:#ff4040;margin-top:10px;}
.success{color:#66ff66;margin-top:10px;}
</style>
</head>
<body>
<div class="gate">
<h1>Access Player Gate</h1>
<p id="msg"></p>
</div>

<script>
const rawURL="https://raw.githubusercontent.com/gesg8899-prog/unique-code-gate/main/player_codes.json";
const redirectURL="https://is.gd/plinko88";

function getCodeFromURL(){
  const params=new URLSearchParams(window.location.search);
  return params.get("code")?.toUpperCase()||"";
}

async function validateCode(){
  const msg=document.getElementById("msg");
  msg.textContent="";
  const code=getCodeFromURL();
  if(!code){
    msg.textContent="No access code provided. Redirecting...";
    msg.className="error";
    return;
  }

  try{
    const res=await fetch(rawURL+"?ts="+Date.now());
    const codes=await res.json();
    const entry=codes.find(c=>c.code===code);

    if(!entry){ msg.textContent="Code not found"; msg.className="error"; return; }
    if(entry.used){ msg.textContent="Code already used"; msg.className="error"; return; }

    msg.textContent="Access Granted! Redirecting..."; msg.className="success";
    setTimeout(()=>window.location.href=redirectURL,800);
  }catch(e){
    msg.textContent="Connection error"; msg.className="error";
  }
}

window.onload=validateCode;
</script>
</body>
</html>
